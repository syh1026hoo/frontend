<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::title}, ~{::main})}">
<head>
    <title>테마별 ETF</title>
</head>
<body>
    <main th:fragment="main">
        <!-- 페이지 헤더 -->
        <div class="row mb-4">
            <div class="col-12">
                <h1 class="section-title">
                    <i class="fas fa-tags me-2"></i>
                    테마별 ETF
                </h1>
                <p class="text-muted">관심 있는 테마와 브랜드별로 ETF를 찾아보세요</p>
            </div>
        </div>

        <!-- 주요 테마 카드 -->
        <div class="row mb-4">
            <div class="col-md-4 col-sm-6 mb-3">
                <div class="card h-100 theme-card">
                    <div class="card-body text-center">
                        <div class="text-success mb-3">
                            <i class="fas fa-chart-line fa-3x"></i>
                        </div>
                        <h5 class="card-title">KODEX ETF</h5>
                        <p class="card-text text-muted">삼성자산운용의 대표 ETF 브랜드</p>
                        <div class="mb-3">
                            <span class="badge bg-success fs-6" th:text="${themeCounts.KODEX} + '개'">0개</span>
                        </div>
                        <a href="/themes/KODEX" class="btn btn-success">
                            <i class="fas fa-arrow-right me-2"></i>
                            보러가기
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 col-sm-6 mb-3">
                <div class="card h-100 theme-card">
                    <div class="card-body text-center">
                        <div class="text-warning mb-3">
                            <i class="fas fa-chart-area fa-3x"></i>
                        </div>
                        <h5 class="card-title">TIGER ETF</h5>
                        <p class="card-text text-muted">미래에셋자산운용의 ETF 브랜드</p>
                        <div class="mb-3">
                            <span class="badge bg-warning fs-6" th:text="${themeCounts.TIGER} + '개'">0개</span>
                        </div>
                        <a href="/themes/TIGER" class="btn btn-warning">
                            <i class="fas fa-arrow-right me-2"></i>
                            보러가기
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 col-sm-6 mb-3">
                <div class="card h-100 theme-card">
                    <div class="card-body text-center">
                        <div class="text-info mb-3">
                            <i class="fas fa-microchip fa-3x"></i>
                        </div>
                        <h5 class="card-title">반도체 ETF</h5>
                        <p class="card-text text-muted">반도체 산업 관련 ETF</p>
                        <div class="mb-3">
                            <span class="badge bg-info fs-6" th:text="${themeCounts.반도체} + '개'">0개</span>
                        </div>
                        <a href="/themes/반도체" class="btn btn-info">
                            <i class="fas fa-arrow-right me-2"></i>
                            보러가기
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 col-sm-6 mb-3">
                <div class="card h-100 theme-card">
                    <div class="card-body text-center">
                        <div class="text-primary mb-3">
                            <i class="fas fa-seedling fa-3x"></i>
                        </div>
                        <h5 class="card-title">SOL ETF</h5>
                        <p class="card-text text-muted">신한자산운용의 ETF 브랜드</p>
                        <div class="mb-3">
                            <span class="badge bg-primary fs-6" th:text="${themeCounts.SOL} + '개'">0개</span>
                        </div>
                        <a href="/themes/SOL" class="btn btn-primary">
                            <i class="fas fa-arrow-right me-2"></i>
                            보러가기
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 col-sm-6 mb-3">
                <div class="card h-100 theme-card">
                    <div class="card-body text-center">
                        <div class="text-secondary mb-3">
                            <i class="fas fa-award fa-3x"></i>
                        </div>
                        <h5 class="card-title">ACE ETF</h5>
                        <p class="card-text text-muted">한국투자자산운용의 ETF 브랜드</p>
                        <div class="mb-3">
                            <span class="badge bg-secondary fs-6" th:text="${themeCounts.ACE} + '개'">0개</span>
                        </div>
                        <a href="/themes/ACE" class="btn btn-secondary">
                            <i class="fas fa-arrow-right me-2"></i>
                            보러가기
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 col-sm-6 mb-3">
                <div class="card h-100 theme-card">
                    <div class="card-body text-center">
                        <div class="text-danger mb-3">
                            <i class="fas fa-dna fa-3x"></i>
                        </div>
                        <h5 class="card-title">바이오 ETF</h5>
                        <p class="card-text text-muted">바이오 산업 관련 ETF</p>
                        <div class="mb-3">
                            <span class="badge bg-danger fs-6" th:text="${themeCounts.바이오} + '개'">0개</span>
                        </div>
                        <a href="/themes/바이오" class="btn btn-danger">
                            <i class="fas fa-arrow-right me-2"></i>
                            보러가기
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 전체 테마 목록 -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-list me-2"></i>
                            전체 테마 목록
                        </h5>
                    </div>
                    <div class="card-body">
                        <div th:if="${categoryGroups != null and !categoryGroups.empty}">
                            <div class="row">
                                <div th:each="category : ${categoryGroups.keySet()}" class="col-lg-3 col-md-4 col-sm-6 mb-3">
                                    <a th:href="@{/themes/{theme}(theme=${category})}" 
                                       class="btn btn-outline-primary w-100 text-start d-flex justify-content-between align-items-center">
                                        <span>
                                            <i class="fas fa-tag me-2"></i>
                                            <span th:text="${category}">테마명</span>
                                        </span>
                                        <span class="badge bg-primary" th:text="${categoryGroups.get(category).size()}">0</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <div th:if="${categoryGroups == null or categoryGroups.empty}" class="text-center py-4">
                            <i class="fas fa-tags fa-3x text-muted mb-3"></i>
                            <h4 class="text-muted">테마 데이터가 없습니다</h4>
                            <p class="text-muted">ETF 데이터를 먼저 동기화해주세요</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 테마 검색 섹션 -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card bg-light">
                    <div class="card-body">
                        <h5 class="card-title">
                            <i class="fas fa-search me-2"></i>
                            원하는 테마를 찾아보세요
                        </h5>
                        <form action="/search" method="GET" class="row g-3">
                            <div class="col-md-8">
                                <input type="text" 
                                       class="form-control" 
                                       name="keyword" 
                                       placeholder="AI, 배당, 부동산, 방산 등 관심 테마를 입력하세요..."
                                       autocomplete="off">
                            </div>
                            <div class="col-md-4">
                                <button type="submit" class="btn btn-primary w-100">
                                    <i class="fas fa-search me-2"></i>
                                    테마 검색
                                </button>
                            </div>
                        </form>
                        
                        <div class="mt-3">
                            <small class="text-muted me-2">인기 테마:</small>
                            <a href="/search?keyword=AI" class="badge bg-info text-decoration-none me-2">AI</a>
                            <a href="/search?keyword=배당" class="badge bg-success text-decoration-none me-2">배당</a>
                            <a href="/search?keyword=조선" class="badge bg-warning text-decoration-none me-2">조선</a>
                            <a href="/search?keyword=방산" class="badge bg-danger text-decoration-none me-2">방산</a>
                            <a href="/search?keyword=원자력" class="badge bg-secondary text-decoration-none">원자력</a>
                            <a href="/search?keyword=미국" class="badge bg-primary text-decoration-none me-2">미국</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <style>
            .theme-card {
                transition: all 0.3s ease;
                border: 2px solid transparent;
            }
            
            .theme-card:hover {
                transform: translateY(-5px);
                border-color: var(--bs-primary);
                box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            }
        </style>
    </main>
</body>
</html>
